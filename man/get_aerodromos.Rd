% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/get_aerodromos.R
\name{get_aerodromos}
\alias{get_aerodromos}
\title{Obtener Aeródromos del Perú}
\usage{
get_aerodromos(
  departamento = NULL,
  provincia = NULL,
  distrito = NULL,
  show_progress = TRUE,
  force_update = FALSE
)
}
\arguments{
\item{departamento}{Character vector. Nombre(s) del/los departamento(s) a descargar.
Opciones válidas: "AMAZONAS", "ANCASH", "APURIMAC", "AREQUIPA", "AYACUCHO",
"CAJAMARCA", "CUSCO", "HUANUCO", "ICA", "JUNIN", "LA LIBERTAD", "LAMBAYEQUE",
"LIMA", "LORETO", "MADRE DE DIOS", "MOQUEGUA", "PASCO", "PIURA", "PUNO",
"SAN MARTIN", "TACNA", "TUMBES", "UCAYALI".
No distingue entre mayúsculas y minúsculas. Si es \code{NULL}, muestra la
lista de departamentos disponibles.}

\item{provincia}{Character vector. Nombre(s) de la(s) provincia(s) para filtrar
dentro del/los departamento(s) especificado(s). Opcional.}

\item{distrito}{Character vector. Nombre(s) del/los distrito(s) para filtrar
dentro de la(s) provincia(s) especificada(s). Opcional.}

\item{show_progress}{Logical. Si \code{TRUE} (por defecto), muestra mensajes
informativos sobre el progreso de la descarga. Si \code{FALSE}, ejecuta de
forma silenciosa.}

\item{force_update}{Logical. Si \code{TRUE}, fuerza una nueva descarga del
archivo incluso si existe en caché. Por defecto \code{FALSE}.}
}
\value{
Un objeto \code{sf} (simple feature) con geometría tipo POINT que contiene
información de los aeródromos, incluyendo:
\itemize{
\item Geometría POINT (coordenadas del aeródromo)
\item \code{nombre}: Nombre del aeródromo
\item \code{label}: Etiqueta descriptiva completa
\item \code{tipo}: Tipo de instalación (AEROPUERTO INTERNACIONAL, AERODROMO, HELIPUERTO)
\item \code{codidep}: Código del departamento
\item \code{nombdep}: Nombre del departamento
\item \code{nombprov}: Nombre de la provincia
\item \code{nombdist}: Nombre del distrito
\item \code{escala}: Escala del aeródromo
\item \code{lat}: Latitud
\item \code{lon}: Longitud
\item \code{estado}: Estado operativo (OPERATIVO, etc.)
\item \code{administ}: Entidad administradora
\item \code{jerarquia}: Jerarquía (NACIONAL, etc.)
\item \code{titular}: Tipo de titularidad (PUBLICA, PRIVADA)
}

Si se solicitan múltiples departamentos, retorna un objeto sf combinado.
}
\description{
Descarga y carga la información de aeródromos del Perú actualizado al año 2022,
elaborado por el Ministerio de Transportes y Comunicaciones. Los datos incluyen
geometría tipo POINT e información sobre aeropuertos, aeródromos y helipuertos.
Permite filtrado escalonado por departamento, provincia y distrito.
}
\details{
La función descarga datos desde OSF (Open Science Framework) y los almacena
en caché durante la sesión de R. Los datos están en formato GeoPackage (.gpkg).

\strong{Fuente de los datos:}
\itemize{
\item Fuente: Ministerio de Transportes y Comunicaciones (MTC)
\item Año: 2022
\item Nivel: Aeródromo/Aeropuerto/Helipuerto
\item Aplicación: Planificación territorial y análisis de conectividad
}

\strong{Filtrado jerárquico:}
Los filtros se aplican en cascada:
\enumerate{
\item Primero se cargan los departamentos especificados
\item Luego se filtran las provincias (si se especifican)
\item Finalmente se filtran los distritos (si se especifican)
}

El caché se almacena en: \code{tempdir()/DEMARCA_cache/aerodromos/}

\strong{NOTA:} Las geometrías son tipo POINT (puntos) y representan la ubicación
de cada aeródromo.
}
\examples{
\dontrun{
# Ver departamentos disponibles
get_aerodromos()

# Cargar aeródromos de un departamento completo
aero_cusco <- get_aerodromos(departamento = "CUSCO")

# Filtrar por provincia específica
aero_prov_cusco <- get_aerodromos(
  departamento = "CUSCO",
  provincia = "CUSCO"
)

# Filtrar por distrito específico
aero_san_sebastian <- get_aerodromos(
  departamento = "CUSCO",
  provincia = "CUSCO",
  distrito = "SAN SEBASTIAN"
)

# Cargar múltiples departamentos
aero_sur <- get_aerodromos(
  departamento = c("CUSCO", "PUNO", "AREQUIPA")
)

# Visualización con ggplot2
library(ggplot2)
library(dplyr)

# Mapa de aeródromos por tipo
ggplot(aero_cusco) +
  geom_sf(aes(color = tipo, shape = tipo), size = 3) +
  scale_color_manual(
    values = c(
      "AEROPUERTO INTERNACIONAL" = "darkred",
      "AERODROMO" = "darkblue",
      "HELIPUERTO" = "darkgreen"
    ),
    name = "Tipo"
  ) +
  labs(
    title = "Aeródromos del Departamento de Cusco",
    subtitle = "Actualizado 2022 - MTC",
    caption = "Fuente: MTC | Visor - SDOT"
  ) +
  theme_minimal()

# Aeródromos por tipo de titularidad
aero_cusco |>
  group_by(tipo, titular) |>
  summarise(n = n(), .groups = "drop") |>
  arrange(desc(n))

# Filtrar aeródromos operativos públicos
aero_publicos <- aero_cusco |>
  filter(titular == "PUBLICA", estado == "OPERATIVO")

# Visualizar aeródromos por administrador
aero_cusco |>
  filter(!is.na(administ)) |>
  group_by(administ) |>
  summarise(n = n(), .groups = "drop") |>
  arrange(desc(n))

# Mapa de aeródromos con etiquetas
ggplot(aero_cusco) +
  geom_sf(aes(color = tipo), size = 4) +
  geom_sf_text(
    aes(label = nombre),
    size = 2.5,
    nudge_y = 0.1,
    check_overlap = TRUE
  ) +
  scale_color_brewer(palette = "Set1", name = "Tipo") +
  labs(
    title = "Aeródromos de Cusco",
    subtitle = "MTC 2022",
    caption = "Fuente: MTC | Visor - SDOT"
  ) +
  theme_minimal()
}

}
\references{
Ministerio de Transportes y Comunicaciones (MTC). Aeródromos del Perú 2022.

Repositorio DEMARCA en OSF: \url{https://osf.io/qy4j6/}
}
\seealso{
\code{\link{get_departamentos}}, \code{\link{get_provincias}},
\code{\link{get_distritos}}, \code{\link[sf]{read_sf}}
}
